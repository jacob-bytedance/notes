# Key Concepts

- **Domain**: Sphere of knowledge and activity around which the business revolves
- **Bounded Contexts**: Implementation of a domain or sub-domain, characterized by clear boundaries and model autonomy
	- ![[Attachments/Domain Driven Design/1.png|512]]
	- ![[2.png|512]]
- **Aggregate**: Cluster of entities and value objects that are treated as a single unit for data changes and consistency, Principal identifier of your bounded context
	- **Entities**: Objects that have a distinct identity and lifecycle (creation, modification, deletion), e.g. customer or order
	- **Value Objects**: Objects that describe aspects of the domain without having a distinct identity and are immutable, e.g. Date or Address
	- **Repositories**: Mechanisms for retrieving and storing aggregates
- **Services**: Operations or processes that are a part of the domain logic, but transcend entities and value objects
	- **Inbound Services**: Incoming requests such as REST APIs, message listeners
	- **Outbound Services**: Communicating with external services, APIs, databases
	- **Application Services**: Workflow within a bounded context, coordinates and directs inbound and outbound services
	- ![[3.png|512]]
	- ![[4.png|512]]
- **Domain Events**: A change in the state of the domain
- **Sagas**: Business processes / workflows, may span across Bounded Contexts

# Example of Key Concepts: Cargo Tracker Project

- **Domain**: Cargo Tracker (with Sub-Domains: Booking, Handling, Routing, Tracking)
- **Bounded Contexts**: Booking, Handling, Routing, Tracking
- **Aggregate**: Cargo Aggregate, Handling Activity, Voyage, Tracking Activity
	- **Entities**: Location of cargo, Cargo details, Handling event
	- **Value Objects**: Booking amount, route specification, itinerary, delivery progress
	- **Repositories**: Cargo repository, Handling activity repository, Voyage repository, Tracking repository
- **Services**: Create new cargo shipment, route cargo shipment
	- ![[5.png|512]]
	- **Inbound Services**: Query cargo, create cargo command
	- **Outbound Services**: Route new cargo

- **Application Services**: Command/Query Delegation

- **Domain Events**: New cargo created, new routing information
- **Sagas**: When a new cargo shipment is booked, we need to process payment, initialize tracking, and assign shipping route

- **Objects**: Aggregates, Entities, and Value Objects

- **Operations**: Commands, Queries, and Events

# Implementation

- **Interface Layer** (or Presentation Layer): Handles user interfaces, APIs, validates and transforms user requests
- **Application Layer**: Coordinating Tasks, Processes, and Overall Flow, liaises between domain layer and user interface
- **Domain Layer**: Core where business logic and rules are implemented
- **Infrastructure Layer**: Supports other layers by providing generic technical capabilities, such as databases, messaging systems, and file storage

# Example of Implementations: Cargo Tracker Project

- **Interface Layer** (or Presentation Layer): Inbound Adaptors

- Accepts Queries and Commands

- CargoBookingController
- BookCargoResource

- **Event Handlers** to process events generated by other BC
- Transform helps translate incoming requests to the corresponding Command/Query models required by the domain model

- BookCargoCommandDTOAssembler

- Application Layer: Application Services

- Dispatch Commands/Queries to the underlying Domain Model, possibly invoking infrastructural components

- CargoBookingCommandService
- CargoBookingQueryService

- Place Outbound Calls to other BC

- ExternalCargoRoutingService: Anti-corruption layer to fetch the Optimal Itinerary for a Cargo based on the Route Specification

- Provide centralized concerns (e.g. Logging, Security, Metrics) for the underlying Domain Model

- Domain Layer: Domain Model

- Implementation of Core Business Logic

- Aggregates

- Cargo
- BookingId

- Entities

- Location

- Value Objects

- Booking Amount
- CargoItinerary
- Delivery

- Commands

- BookCargoCommand
- RouteCargoCommand

- Events

- Infrastructure Layer: Outbound Adaptors

- Communicate with underlying datastore, e.g. MySQL

- CargoRepository extends JpaRepository<Cargo, Long>

- Managing message queue, e.g. RabbitMQ

- CargoEventSource

- Relationship to MetricsBank

- Interface Layer (or Presentation Layer)

- MetricsController and MetricsQueryController: API requests for query and command
- Converter folder: Adaptors to convert requests into commands
- Value objects folder: Request objects / Resources

- Application Layer: Coordinating Tasks, Processes, and Overall Flow, liaises between domain layer and user interface

- IMetricsQueryService and MetricsQueryServiceImpl: Directs queries to the domain layer
- MetricCmdService: Directs commands to the domain layer
- Command and Executor

- Domain Layer: Core where business logic and rules are implemented

- Aggregates

- Metric

- Entities

- Metric Usage Info
- Metric View Info
- Metric Data Source

- Value Objects

- Metric Key
- Name
- Description
- Time Period
- Status
- Version
- Create Time
- Modify Time
- Creator Id
- Modifier Id
- Modules
- Granularity
- Category

- Commands

- Create Metric Command
- Update Metric Command
- Delete Metric Command

- Process create, update, and delete commands
- Process query requests

- Infrastructure Layer: Supports other layers by providing generic technical capabilities, such as databases, messaging systems, and file storage

- Use elasticsearch and sql to maintain metrics storage